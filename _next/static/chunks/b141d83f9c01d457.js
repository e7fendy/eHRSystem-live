(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,t,s)=>{t.exports=e.r(76562)},16973,e=>{"use strict";let t="https://script.google.com/macros/s/AKfycbwMCWTFF-C4d9ibN7PBEgvZsvMrVb4Q2NX0c2XRZIadR-AX0HUnyHCWEMvcOA5uHbeW/exec";e.s(["apiService",0,{login:async(e,s)=>(await fetch(t,{method:"POST",mode:"cors",body:JSON.stringify({action:"login",username:e,password:s})})).json(),recordAttendance:async e=>(await fetch(t,{method:"POST",mode:"cors",body:JSON.stringify({action:"attendance",...e})})).json()}])},52683,e=>{"use strict";var t=e.i(43476),s=e.i(71645),r=e.i(18566),a=e.i(32341),n=e.i(16973);function i(){let{user:e,logout:i,isLoading:o}=(0,a.useAuth)(),l=(0,r.useRouter)(),[c,d]=(0,s.useState)("idle"),[x,m]=(0,s.useState)(""),[g,u]=(0,s.useState)(null);(0,s.useEffect)(()=>{o||e||l.push("/login")},[e,o,l]);let h=async t=>{if(d("loading"),m("Capturing location..."),!navigator.geolocation){d("error"),m("Geolocation is not supported by your browser");return}navigator.geolocation.getCurrentPosition(async s=>{let{latitude:r,longitude:a}=s.coords;u({lat:r,lng:a}),m(`Recording ${"IN"===t?"Clock In":"Clock Out"}...`);try{let s=await n.apiService.recordAttendance({username:e.username,type:t,latitude:r,longitude:a,userAgent:navigator.userAgent,deviceType:window.innerWidth<768?"mobile":"desktop"});s.success?(d("success"),m(`${"IN"===t?"Clocked in":"Clocked out"} successfully!`),setTimeout(()=>d("idle"),3e3)):(d("error"),m(s.message||"Failed to record attendance"))}catch(e){d("error"),m("Server connection error. Check GAS URL.")}},e=>{d("error"),m(`Location error: ${e.message}. Please enable GPS.`)})};return o||!e?null:(0,t.jsxs)("div",{className:"min-h-screen max-w-4xl mx-auto p-4 md:p-8",children:[(0,t.jsxs)("header",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-8 bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold",children:["Welcome, ",e.name]}),(0,t.jsxs)("p",{className:"text-gray-500 text-sm",children:["Role: ",e.role]})]}),(0,t.jsx)("button",{onClick:i,className:"text-sm font-medium text-gray-500 hover:text-red-600 transition border border-gray-200 px-4 py-2 rounded-lg hover:border-red-100 hover:bg-red-50",children:"Sign Out"})]}),(0,t.jsxs)("main",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,t.jsxs)("section",{className:"bg-white p-8 rounded-2xl shadow-md border border-gray-100 flex flex-col items-center justify-center space-y-8",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-xl font-semibold mb-2",children:"Attendance Action"}),(0,t.jsx)("p",{className:"text-gray-500 text-sm",children:"Captured with GPS location"})]}),(0,t.jsxs)("div",{className:"flex flex-col w-full gap-4",children:[(0,t.jsxs)("button",{onClick:()=>h("IN"),disabled:"loading"===c,className:"group relative flex items-center justify-center gap-3 bg-green-600 hover:bg-green-700 text-white font-bold py-6 rounded-2xl transition duration-300 transform active:scale-95 disabled:opacity-50",children:[(0,t.jsx)("span",{className:"text-2xl",children:"üïí"}),(0,t.jsx)("span",{className:"text-xl",children:"CLOCK IN"})]}),(0,t.jsxs)("button",{onClick:()=>h("OUT"),disabled:"loading"===c,className:"group relative flex items-center justify-center gap-3 bg-red-600 hover:bg-red-700 text-white font-bold py-6 rounded-2xl transition duration-300 transform active:scale-95 disabled:opacity-50",children:[(0,t.jsx)("span",{className:"text-2xl",children:"‚è≥"}),(0,t.jsx)("span",{className:"text-xl",children:"CLOCK OUT"})]})]}),"idle"!==c&&(0,t.jsxs)("div",{className:`w-full p-4 rounded-xl text-center text-sm font-medium transition-all ${"loading"===c?"bg-blue-50 text-blue-700":"success"===c?"bg-green-50 text-green-700 border border-green-100":"bg-red-50 text-red-700 border border-red-100"}`,children:["loading"===c&&(0,t.jsx)("span",{className:"inline-block animate-pulse mr-2",children:"‚óè"}),x]})]}),(0,t.jsxs)("section",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-2xl shadow-sm border border-gray-100",children:[(0,t.jsx)("h3",{className:"font-semibold mb-4 text-gray-700",children:"System Info"}),(0,t.jsxs)("div",{className:"space-y-3 text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-50",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"Device Detected"}),(0,t.jsx)("span",{className:"font-medium capitalize",children:window.innerWidth<768?"Mobile":"Desktop"})]}),(0,t.jsxs)("div",{className:"flex justify-between py-2 border-b border-gray-50",children:[(0,t.jsx)("span",{className:"text-gray-500",children:"GPS Status"}),(0,t.jsx)("span",{className:`font-medium ${g?"text-green-600":"text-orange-500"}`,children:g?"Active":"Awaiting Permission"})]}),g&&(0,t.jsxs)("div",{className:"text-[10px] text-gray-400 mt-2 font-mono",children:["LAT: ",g.lat.toFixed(4),", LNG: ",g.lng.toFixed(4)]})]})]}),(0,t.jsxs)("div",{className:"bg-gradient-to-br from-blue-600 to-indigo-700 p-6 rounded-2xl shadow-lg text-white",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Notice"}),(0,t.jsx)("p",{className:"text-sm opacity-90 leading-relaxed",children:"Please ensure you are at the work location before clocking in. Your GPS coordinates are recorded for verification."})]})]})]}),(0,t.jsxs)("footer",{className:"mt-12 text-center text-gray-400 text-sm",children:["¬© ",new Date().getFullYear()," eHR System. All rights reserved."]})]})}e.s(["default",()=>i])}]);