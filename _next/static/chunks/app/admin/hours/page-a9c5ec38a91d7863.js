(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[734],{9751:(e,t,n)=>{Promise.resolve().then(n.bind(n,2175))},6967:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(7401).A)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3950:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});let s=(0,n(7401).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},2175:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>S});var s=n(5155),a=n(2115),r=n(6046),l=n(8435),i=n(183),d=n(7492),c=n(2508),o=n(1344),m=n(7528),u=n(3312),p=n(5121),x=n(9749),h=n(3849),f=n(814),g=n(4505),j=n(7401);let y=(0,j.A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),N=(0,j.A)("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]);var v=n(1902),b=n(1719),w=n(3950);let A=(0,j.A)("external-link",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);function S(){let{user:e,isLoading:t}=(0,l.A)(),{t:n}=(0,i.o)(),j=(0,r.useRouter)(),S=(0,r.useSearchParams)(),k=(0,r.usePathname)(),[C,I]=(0,a.useState)([]),[M,O]=(0,a.useState)({total:0,page:1,pageSize:10,totalPages:0}),[E,R]=(0,a.useState)(!0),H=new Date,_=S.get("year")?parseInt(S.get("year")):H.getFullYear(),P=S.get("month")?parseInt(S.get("month")):H.getMonth()+1,T=S.get("status")||"all",U=S.get("page")?parseInt(S.get("page")):1,[D,L]=(0,a.useState)(P),[$,q]=(0,a.useState)(_),[F,V]=(0,a.useState)(T),[W,z]=(0,a.useState)(U),[B,Y]=(0,a.useState)(null),[Z,K]=(0,a.useState)(!1),[X,G]=(0,a.useState)(!1),J=Array.from({length:12},(e,t)=>({value:t+1,label:new Date(0,t).toLocaleString(void 0,{month:"long"})})),Q=Array.from({length:5},(e,t)=>H.getFullYear()-t),ee=(0,a.useCallback)(async(e,t,s,a)=>{R(!0);try{let r=await d.K.getAttendanceSummary(e,10,t,s,a);r.success?(I(r.summaries),O(r.pagination)):f.oR.error(r.message||n("common.error"))}catch(e){f.oR.error(n("dashboard.serverError"))}finally{R(!1)}},[n]);(0,a.useEffect)(()=>{if(!t){if(!e||"ADMIN"!==e.role.toUpperCase()){j.push("/");return}let t=new URLSearchParams(S.toString());t.set("year",$.toString()),t.set("month",D.toString()),t.set("status",F),t.set("page",W.toString());let n=t.toString();n!==S.toString()&&j.replace("".concat(k,"?").concat(n),{scroll:!1}),ee(W,D,$,F)}},[$,D,F,W,t,e,k,j,ee]);let et=e=>{q(e),z(1)},en=e=>{L(e),z(1)},es=e=>{V(e),z(1)};return t||!e||"ADMIN"!==e.role.toUpperCase()?(0,s.jsx)("div",{className:"flex h-screen items-center justify-center",children:(0,s.jsx)(g.A,{className:"h-8 w-8 animate-spin text-primary"})}):(0,s.jsxs)("div",{className:"p-4 sm:p-8 max-w-7xl mx-auto space-y-6 sm:space-y-8 min-h-screen bg-muted/30",children:[(0,s.jsx)(x.Zp,{className:"shadow-none border-none bg-background rounded-3xl hidden sm:block",children:(0,s.jsx)(x.aR,{className:"p-8",children:(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)(x.ZB,{className:"text-3xl font-bold tracking-tight",children:n("admin.employeeHours")}),(0,s.jsxs)(x.BT,{className:"text-base",children:[n("admin.selectPeriod")," â€¢ ",n("admin.calculationInfo")]})]})})}),(0,s.jsx)("div",{className:"bg-background rounded-3xl border shadow-sm",children:(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between p-4 gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between w-full sm:w-auto",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm text-muted-foreground font-medium px-2",children:[(0,s.jsx)(y,{className:"h-4 w-4"}),n("admin.summaryForMonth")]}),(0,s.jsxs)(u.$,{variant:"outline",size:"sm",onClick:()=>G(!X),className:"sm:hidden h-10 px-4 rounded-xl border-muted-foreground/20 flex items-center gap-2 font-bold",children:[(0,s.jsx)(N,{className:"h-4 w-4"}),(0,s.jsx)("span",{children:n("admin.filter")}),X?(0,s.jsx)(v.A,{className:"h-4 w-4"}):(0,s.jsx)(b.A,{className:"h-4 w-4"})]})]}),(0,s.jsxs)("div",{className:"".concat(X?"flex":"hidden"," sm:flex flex-col sm:flex-row gap-4 w-full sm:w-auto"),children:[(0,s.jsxs)(m.l6,{value:$.toString(),onValueChange:e=>et(parseInt(e)),children:[(0,s.jsx)(m.bq,{className:"w-full sm:w-[120px] h-12 rounded-xl border-muted-foreground/20",children:(0,s.jsx)(m.yv,{placeholder:"Year"})}),(0,s.jsx)(m.gC,{position:"popper",sideOffset:4,className:"max-h-[300px]",children:Q.map(e=>(0,s.jsx)(m.eb,{value:e.toString(),children:e},e))})]}),(0,s.jsxs)(m.l6,{value:D.toString(),onValueChange:e=>en(parseInt(e)),children:[(0,s.jsx)(m.bq,{className:"w-full sm:w-[150px] h-12 rounded-xl border-muted-foreground/20",children:(0,s.jsx)(m.yv,{placeholder:"Month"})}),(0,s.jsx)(m.gC,{position:"popper",sideOffset:4,className:"max-h-[300px]",children:J.map(e=>(0,s.jsx)(m.eb,{value:e.value.toString(),children:e.label},e.value))})]}),(0,s.jsxs)(m.l6,{value:F,onValueChange:e=>es(e),children:[(0,s.jsx)(m.bq,{className:"w-full sm:w-[150px] h-12 rounded-xl border-muted-foreground/20",children:(0,s.jsx)(m.yv,{placeholder:"Status"})}),(0,s.jsxs)(m.gC,{position:"popper",sideOffset:4,className:"max-h-[300px]",children:[(0,s.jsx)(m.eb,{value:"all",children:n("admin.all")}),(0,s.jsx)(m.eb,{value:"complete",children:n("admin.complete")}),(0,s.jsx)(m.eb,{value:"incomplete",children:n("admin.incomplete")})]})]})]})]})}),(0,s.jsx)("div",{className:"rounded-3xl border bg-background shadow-sm overflow-hidden",children:(0,s.jsxs)(c.XI,{children:[(0,s.jsx)(c.A0,{className:"bg-muted/50",children:(0,s.jsxs)(c.Hj,{children:[(0,s.jsx)(c.nd,{className:"font-bold py-5 px-6",children:n("admin.name")}),(0,s.jsx)(c.nd,{className:"font-bold py-5 px-6 text-center",children:n("admin.clockedHours")}),(0,s.jsx)(c.nd,{className:"hidden sm:table-cell font-bold py-5 px-6 text-center",children:n("admin.missingHours")}),(0,s.jsx)(c.nd,{className:"hidden sm:table-cell font-bold py-5 px-6 text-center",children:n("admin.overtimeHours")}),(0,s.jsx)(c.nd,{className:"hidden sm:table-cell font-bold py-5 px-6 text-center",children:n("admin.status")}),(0,s.jsx)(c.nd,{className:"font-bold py-5 px-6 text-center",children:n("admin.actions")})]})}),(0,s.jsx)(c.BF,{children:E?(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:6,className:"h-24 text-center",children:(0,s.jsx)(g.A,{className:"mx-auto h-6 w-6 animate-spin text-muted-foreground"})})}):0===C.length?(0,s.jsx)(c.Hj,{children:(0,s.jsx)(c.nA,{colSpan:6,className:"h-24 text-center text-muted-foreground",children:n("admin.noRecords")})}):C.map(e=>(0,s.jsxs)(c.Hj,{className:"hover:bg-muted/50",children:[(0,s.jsx)(c.nA,{className:"py-4 px-6 font-medium",children:(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("span",{children:e.name}),(0,s.jsxs)("span",{className:"text-xs text-muted-foreground",children:["@",e.username]}),e.hasIncomplete&&(0,s.jsxs)(p.E,{variant:"destructive",className:"sm:hidden w-fit mt-1 text-[10px] px-1 py-0 h-4",children:[(0,s.jsx)(w.A,{className:"h-2 w-2 mr-1"}),n("admin.incomplete")]})]})}),(0,s.jsxs)(c.nA,{className:"py-4 px-6 text-center font-semibold",children:[e.clockedHours,"h"]}),(0,s.jsxs)(c.nA,{className:"hidden sm:table-cell py-4 px-6 text-center text-destructive",children:[e.missingHours,"h"]}),(0,s.jsxs)(c.nA,{className:"hidden sm:table-cell py-4 px-6 text-center text-primary",children:[e.overtimeHours,"h"]}),(0,s.jsx)(c.nA,{className:"hidden sm:table-cell py-4 px-6 text-center",children:(0,s.jsx)(p.E,{variant:e.hasIncomplete?"destructive":"secondary",className:"uppercase text-[10px]",children:e.hasIncomplete?n("admin.incomplete"):n("admin.complete")})}),(0,s.jsx)(c.nA,{className:"py-4 px-6 text-center",children:(0,s.jsx)(u.$,{variant:"ghost",size:"icon",onClick:()=>{Y(e),K(!0)},className:"rounded-full hover:bg-primary/10 hover:text-primary transition-colors",children:(0,s.jsx)(y,{className:"h-5 w-5"})})})]},e.userId))})]})}),M.totalPages>1&&(0,s.jsx)(h.dK,{children:(0,s.jsxs)(h.Iu,{children:[(0,s.jsx)(h.cU,{children:(0,s.jsx)(h.Eb,{href:"#",onClick:e=>{e.preventDefault(),M.page>1&&z(M.page-1)},className:M.page<=1?"pointer-events-none opacity-50":""})}),Array.from({length:M.totalPages},(e,t)=>t+1).map(e=>(0,s.jsx)(h.cU,{children:(0,s.jsx)(h.n$,{href:"#",isActive:e===M.page,onClick:t=>{t.preventDefault(),z(e)},children:e})},e)),(0,s.jsx)(h.cU,{children:(0,s.jsx)(h.WA,{href:"#",onClick:e=>{e.preventDefault(),M.page<M.totalPages&&z(M.page+1)},className:M.page>=M.totalPages?"pointer-events-none opacity-50":""})})]})}),(0,s.jsx)(o.lG,{open:Z,onOpenChange:K,children:(0,s.jsxs)(o.Cf,{className:"w-full h-full max-w-none m-0 rounded-none top-0 left-0 translate-x-0 translate-y-0 sm:top-[50%] sm:left-[50%] sm:translate-x-[-50%] sm:translate-y-[-50%] sm:max-w-[400px] sm:h-auto sm:rounded-3xl p-6 sm:p-8 pt-16 sm:pt-8 flex flex-col justify-center sm:block",children:[(0,s.jsx)(o.c7,{children:(0,s.jsx)(o.L3,{className:"text-xl font-bold",children:n("admin.details")})}),B&&(0,s.jsxs)("div",{className:"space-y-6 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{className:"w-12 h-12 rounded-full bg-primary/10 flex items-center justify-center text-primary font-bold text-lg",children:B.name.charAt(0)}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"font-bold text-lg leading-tight",children:B.name}),(0,s.jsxs)("p",{className:"text-muted-foreground text-sm",children:["@",B.username]})]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"p-4 bg-muted/50 rounded-2xl space-y-1",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:n("admin.clockedHours")}),(0,s.jsxs)("p",{className:"text-xl font-bold",children:[B.clockedHours,"h"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-muted/50 rounded-2xl space-y-1",children:[(0,s.jsx)("p",{className:"text-xs text-muted-foreground font-medium uppercase tracking-wider",children:n("admin.incomplete")}),(0,s.jsx)("p",{className:"text-xl font-bold",children:B.hasIncomplete?(0,s.jsx)("span",{className:"text-destructive",children:n("admin.yes")}):(0,s.jsx)("span",{className:"text-primary",children:n("admin.no")})})]}),(0,s.jsxs)("div",{className:"p-4 bg-destructive/5 rounded-2xl space-y-1 border border-destructive/10",children:[(0,s.jsx)("p",{className:"text-xs text-destructive/70 font-medium uppercase tracking-wider",children:n("admin.missingHours")}),(0,s.jsxs)("p",{className:"text-xl font-bold text-destructive",children:[B.missingHours,"h"]})]}),(0,s.jsxs)("div",{className:"p-4 bg-primary/5 rounded-2xl space-y-1 border border-primary/10",children:[(0,s.jsx)("p",{className:"text-xs text-primary/70 font-medium uppercase tracking-wider",children:n("admin.overtimeHours")}),(0,s.jsxs)("p",{className:"text-xl font-bold text-primary",children:[B.overtimeHours,"h"]})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsxs)(u.$,{onClick:()=>{j.push("/attendance?userId=".concat(B.userId,"&month=").concat(D,"&year=").concat($))},className:"w-full h-12 rounded-xl font-bold flex items-center justify-center gap-2",children:[(0,s.jsx)(A,{className:"h-4 w-4"}),n("admin.viewAttendance")]}),(0,s.jsx)(u.$,{variant:"ghost",onClick:()=>K(!1),className:"w-full h-12 rounded-xl font-bold",children:n("common.cancel")})]})]})]})})]})}},7028:(e,t,n)=>{"use strict";n.d(t,{C:()=>l});var s=n(2115),a=n(8068),r=n(6611),l=e=>{let{present:t,children:n}=e,l=function(e){var t,n;let[a,l]=s.useState(),d=s.useRef(null),c=s.useRef(e),o=s.useRef("none"),[m,u]=(t=e?"mounted":"unmounted",n={mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}},s.useReducer((e,t)=>{let s=n[e][t];return null!=s?s:e},t));return s.useEffect(()=>{let e=i(d.current);o.current="mounted"===m?e:"none"},[m]),(0,r.N)(()=>{let t=d.current,n=c.current;if(n!==e){let s=o.current,a=i(t);e?u("MOUNT"):"none"===a||(null==t?void 0:t.display)==="none"?u("UNMOUNT"):n&&s!==a?u("ANIMATION_OUT"):u("UNMOUNT"),c.current=e}},[e,u]),(0,r.N)(()=>{if(a){var e;let t;let n=null!==(e=a.ownerDocument.defaultView)&&void 0!==e?e:window,s=e=>{let s=i(d.current).includes(CSS.escape(e.animationName));if(e.target===a&&s&&(u("ANIMATION_END"),!c.current)){let e=a.style.animationFillMode;a.style.animationFillMode="forwards",t=n.setTimeout(()=>{"forwards"===a.style.animationFillMode&&(a.style.animationFillMode=e)})}},r=e=>{e.target===a&&(o.current=i(d.current))};return a.addEventListener("animationstart",r),a.addEventListener("animationcancel",s),a.addEventListener("animationend",s),()=>{n.clearTimeout(t),a.removeEventListener("animationstart",r),a.removeEventListener("animationcancel",s),a.removeEventListener("animationend",s)}}u("ANIMATION_END")},[a,u]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:s.useCallback(e=>{d.current=e?getComputedStyle(e):null,l(e)},[])}}(t),d="function"==typeof n?n({present:l.isPresent}):s.Children.only(n),c=(0,a.s)(l.ref,function(e){var t,n;let s=null===(t=Object.getOwnPropertyDescriptor(e.props,"ref"))||void 0===t?void 0:t.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?e.ref:(a=(s=null===(n=Object.getOwnPropertyDescriptor(e,"ref"))||void 0===n?void 0:n.get)&&"isReactWarning"in s&&s.isReactWarning)?e.props.ref:e.props.ref||e.ref}(d));return"function"==typeof n||l.isPresent?s.cloneElement(d,{ref:c}):null};function i(e){return(null==e?void 0:e.animationName)||"none"}l.displayName="Presence"},2317:(e,t,n)=>{"use strict";n.d(t,{DX:()=>m,TL:()=>o});var s,a=n(2115),r=n(8068),l=n(5155),i=Symbol.for("react.lazy"),d=(s||(s=n.t(a,2)))[" use ".trim().toString()];function c(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function o(e){let t=function(e){let t=a.forwardRef((e,t)=>{let{children:n,...s}=e;if(c(n)&&"function"==typeof d&&(n=d(n._payload)),a.isValidElement(n)){var l;let e,i;let d=(l=n,(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.ref:(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning?l.props.ref:l.props.ref||l.ref),c=function(e,t){let n={...t};for(let s in t){let a=e[s],r=t[s];/^on[A-Z]/.test(s)?a&&r?n[s]=(...e)=>{let t=r(...e);return a(...e),t}:a&&(n[s]=a):"style"===s?n[s]={...a,...r}:"className"===s&&(n[s]=[a,r].filter(Boolean).join(" "))}return{...e,...n}}(s,n.props);return n.type!==a.Fragment&&(c.ref=t?(0,r.t)(t,d):d),a.cloneElement(n,c)}return a.Children.count(n)>1?a.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),n=a.forwardRef((e,n)=>{let{children:s,...r}=e;c(s)&&"function"==typeof d&&(s=d(s._payload));let i=a.Children.toArray(s),o=i.find(p);if(o){let e=o.props.children,s=i.map(t=>t!==o?t:a.Children.count(e)>1?a.Children.only(null):a.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...r,ref:n,children:a.isValidElement(e)?a.cloneElement(e,void 0,s):null})}return(0,l.jsx)(t,{...r,ref:n,children:s})});return n.displayName=`${e}.Slot`,n}var m=o("Slot"),u=Symbol("radix.slottable");function p(e){return a.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===u}}},e=>{var t=t=>e(e.s=t);e.O(0,[65,814,991,928,626,397,678,441,517,358],()=>t(9751)),_N_E=e.O()}]);