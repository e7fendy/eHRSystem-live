(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3709:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,4147,23)),Promise.resolve().then(s.t.bind(s,8489,23)),Promise.resolve().then(s.t.bind(s,347,23)),Promise.resolve().then(s.bind(s,8534)),Promise.resolve().then(s.bind(s,2548)),Promise.resolve().then(s.bind(s,8435))},8534:(e,t,s)=>{"use strict";s.d(t,{Providers:()=>l});var a=s(5155),r=s(4514),n=s(183),o=s(814);function l(e){let{children:t}=e;return(0,a.jsx)(n.I,{children:(0,a.jsxs)(r.M,{children:[t,(0,a.jsx)(o.l$,{position:"top-center",richColors:!0})]})})}},2548:(e,t,s)=>{"use strict";s.d(t,{ClientLayout:()=>v});var a=s(5155),r=s(8435),n=s(2115),o=s(8173),l=s.n(o),i=s(183),c=s(6240),d=s(7393),m=s(8233),u=s(2860),x=s(7646),h=s(4373),g=s(2173);let p=()=>{let{user:e,logout:t}=(0,r.A)(),{t:s}=(0,i.o)(),[o,p]=(0,n.useState)(!1);return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("aside",{className:"hidden md:flex flex-col w-64 h-screen bg-white border-r border-slate-100 p-6 fixed left-0 top-0 z-50 shadow-[4px_0_24px_rgba(0,0,0,0.02)]",children:[(0,a.jsx)("div",{className:"mb-8 px-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-[#5356FF] rounded-xl flex items-center justify-center text-white text-xl font-bold shadow-lg shadow-indigo-100",children:"e"}),(0,a.jsx)("span",{className:"text-xl font-bold text-slate-900 tracking-tight",children:s("common.appName")})]})}),(0,a.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,a.jsxs)(l(),{href:"/profile",className:"px-2 flex items-center gap-3 hover:bg-slate-50 p-2 rounded-xl transition-colors -mx-2 cursor-pointer group",children:[(0,a.jsx)(d.Q,{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name),"&background=5356FF&color=fff"),className:"shadow-md shrink-0 group-hover:shadow-lg transition-shadow",size:"md"}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"font-bold text-slate-900 truncate text-base leading-tight group-hover:text-[#5356FF] transition-colors",children:e.name}),e.role.toLowerCase()!==e.name.toLowerCase()&&(0,a.jsx)("span",{className:"text-slate-400 font-medium text-xs truncate",children:e.role})]})]}),(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(m.T,{onPress:t,variant:"flat",color:"danger",className:"w-full font-bold h-10 rounded-xl bg-red-50 text-red-600 hover:bg-red-100 border-none justify-start px-3",startContent:(0,a.jsx)("span",{className:"text-base",children:"\uD83D\uDEAA"}),size:"sm",children:s("common.signOut")})}),(0,a.jsx)(u.y,{className:"bg-slate-50 mt-4"})]}),(0,a.jsx)("nav",{className:"flex-1 space-y-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-3 px-4 py-3 bg-indigo-50 text-[#5356FF] rounded-2xl font-bold transition-all",children:[(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{children:s("dashboard.attendanceAction")})]})}),(0,a.jsx)("div",{className:"mt-auto pt-6",children:(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(c.c,{})})})]}),(0,a.jsxs)(x.H,{className:"md:hidden bg-white border-b border-slate-100 sticky top-0 z-[60] h-[72px]",maxWidth:"full",children:[(0,a.jsx)(h.t,{justify:"start",children:(0,a.jsx)("button",{onClick:()=>p(!o),className:"w-10 h-10 flex items-center justify-center text-slate-900 rounded-lg hover:bg-slate-50 transition-colors focus:outline-none",type:"button","aria-label":"Toggle navigation menu",children:o?(0,a.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M18 6L6 18M6 6L18 18",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})}):(0,a.jsx)("svg",{fill:"none",height:"24",viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:(0,a.jsx)("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2"})})})}),(0,a.jsx)(h.t,{justify:"center",children:(0,a.jsxs)(g.$,{className:"gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-[#5356FF] rounded-lg flex items-center justify-center text-white text-lg font-bold shadow-sm",children:"e"}),(0,a.jsx)("p",{className:"font-bold text-slate-900 text-lg tracking-tight",children:s("common.appName")})]})}),(0,a.jsx)(h.t,{justify:"end",className:"w-10"})]}),o&&(0,a.jsx)("div",{className:"md:hidden fixed inset-0 z-40 bg-black/20 backdrop-blur-sm",style:{top:"71px",height:"calc(100vh - 71px)"},onClick:()=>p(!1)}),(0,a.jsx)("div",{className:"md:hidden fixed left-0 w-3/4 max-w-xs bg-white border-r border-slate-100 shadow-2xl z-50 transition-transform duration-300 ease-in-out ".concat(o?"translate-x-0":"-translate-x-full"),style:{top:"71px",height:"calc(100vh - 71px)"},children:(0,a.jsxs)("div",{className:"flex flex-col h-full p-6 overflow-y-auto",children:[(0,a.jsxs)(l(),{href:"/profile",onClick:()=>p(!1),className:"mb-2 flex items-center gap-4 hover:bg-slate-50 p-2 rounded-xl transition-colors -mx-2 cursor-pointer group",children:[(0,a.jsx)(d.Q,{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name),"&background=5356FF&color=fff"),className:"shadow-lg shrink-0 group-hover:shadow-xl transition-shadow",size:"lg"}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"text-xl font-bold text-slate-900 truncate group-hover:text-[#5356FF] transition-colors",children:e.name}),e.role.toLowerCase()!==e.name.toLowerCase()&&(0,a.jsx)("span",{className:"text-base text-slate-400 font-medium truncate",children:e.role})]})]}),(0,a.jsx)("div",{className:"mt-6 mb-2",children:(0,a.jsx)(m.T,{onPress:()=>{t(),p(!1)},color:"danger",variant:"flat",className:"w-full font-bold h-12 rounded-[20px] bg-red-50 text-red-600 text-base justify-start px-4",startContent:(0,a.jsx)("span",{className:"text-xl",children:"\uD83D\uDEAA"}),children:s("common.signOut")})}),(0,a.jsx)(u.y,{className:"bg-slate-100 my-4"}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(0,a.jsxs)("div",{className:"flex items-center gap-4 px-4 py-4 bg-indigo-50 text-[#5356FF] rounded-[24px] font-bold",children:[(0,a.jsx)("span",{className:"text-2xl",children:"\uD83D\uDCCA"}),(0,a.jsx)("span",{className:"text-lg",children:s("dashboard.attendanceAction")})]})}),(0,a.jsxs)("div",{className:"mt-auto pb-6 space-y-4",children:[(0,a.jsx)(c.c,{}),(0,a.jsxs)("div",{className:"font-medium opacity-60 text-center text-xs text-slate-400",children:["\xa9 ",new Date().getFullYear()," ",s("common.appName"),". ",s("dashboard.allRightsReserved")]})]})]})})]}):null};var f=s(6046);function v(e){let{children:t}=e,{user:s,isLoading:n}=(0,r.A)(),o=(0,f.usePathname)();if(n)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-[#f8fafe]",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#5356FF]"})});let l=s&&"/login"!==o;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen",children:[l&&(0,a.jsx)(p,{}),(0,a.jsx)("main",{className:"flex-1 transition-all duration-300 ".concat(l?"md:pl-64":""),children:t})]})}},6240:(e,t,s)=>{"use strict";s.d(t,{c:()=>d});var a=s(5155),r=s(183),n=s(1028),o=s(3898),l=s(8233),i=s(5964),c=s(8619);let d=()=>{let{language:e,setLanguage:t}=(0,r.o)(),s=[{key:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{key:"zh-tw",label:"繁體中文",flag:"\uD83C\uDDF9\uD83C\uDDFC"}],d=s.find(t=>t.key===e)||s[0];return(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)(n.A,{placement:"top",showArrow:!0,classNames:{content:"bg-white border border-gray-100 shadow-xl min-w-[180px] md:min-w-[140px] p-2"},children:[(0,a.jsx)(o.b,{children:(0,a.jsxs)(l.T,{variant:"flat",size:"md",className:"bg-slate-100/50 hover:bg-slate-100 text-slate-500 font-semibold transition-all h-12 md:h-8 px-6 md:px-4 rounded-full",children:[(0,a.jsx)("span",{className:"mr-2 text-xl md:text-sm",children:d.flag}),(0,a.jsx)("span",{className:"text-base md:text-xs",children:d.label})]})}),(0,a.jsx)(i.y,{"aria-label":"Language Selection",onAction:e=>t(e),selectedKeys:[e],selectionMode:"single",itemClasses:{base:["rounded-lg","transition-opacity","py-3 md:py-2","px-3 md:px-2","data-[hover=true]:text-indigo-600","data-[hover=true]:bg-indigo-50","data-[selectable=true]:focus:bg-indigo-50","data-[pressed=true]:opacity-70"],title:"text-base md:text-sm"},children:s.map(t=>(0,a.jsx)(c.Y,{startContent:(0,a.jsx)("span",{className:"text-xl md:text-base mr-2 md:mr-0",children:t.flag}),className:e===t.key?"text-indigo-600 font-semibold":"text-gray-600",children:t.label},t.key))})]})})}},8435:(e,t,s)=>{"use strict";s.d(t,{A:()=>l,AuthProvider:()=>o});var a=s(5155),r=s(2115);let n=(0,r.createContext)(void 0),o=e=>{let{children:t}=e,[s,o]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("ehr_user");if(e)try{o(JSON.parse(e))}catch(e){localStorage.removeItem("ehr_user")}i(!1)},[]),(0,a.jsx)(n.Provider,{value:{user:s,login:e=>{o(e),localStorage.setItem("ehr_user",JSON.stringify(e))},logout:()=>{o(null),localStorage.removeItem("ehr_user")},isLoading:l},children:t})},l=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},183:(e,t,s)=>{"use strict";s.d(t,{I:()=>l,o:()=>i});var a=s(5155),r=s(2115);let n={en:{common:{appName:"eHR System",signOut:"Sign Out",loading:"Loading...",error:"Error",success:"Success",notice:"Notice",systemInfo:"System Info"},login:{welcomeBack:"Welcome Back",signInToAccount:"Sign in to your eHR account",username:"Username",password:"Password",signIn:"Sign In",signingIn:"Signing in...",invalidCredentials:"Invalid credentials",connectionError:"Failed to connect to the server. Please check your connection and GAS URL.",needHelp:"Need help?",contactSupport:"Contact Support",managementSystem:"Management System",enterUsername:"Enter your username",enterPassword:"Enter your password"},dashboard:{welcome:"Welcome, {name}",role:"Role: {role}",attendanceAction:"Attendance Action",capturedWithGps:"Captured with GPS location",clockIn:"CLOCK IN",clockOut:"CLOCK OUT",capturingLocation:"Capturing location...",recordingClockIn:"Recording Clock In...",recordingClockOut:"Recording Clock Out...",clockedInSuccess:"Clocked in successfully!",clockedOutSuccess:"Clocked out successfully!",failedToRecord:"Failed to record attendance",serverError:"Server connection error. Check GAS URL.",locationError:"Location error: {error}. Please enable GPS.",geoNotSupported:"Geolocation is not supported by your browser",deviceDetected:"Device Detected",gpsStatus:"GPS Status",active:"Active",awaitingPermission:"Awaiting Permission",noticeContent:"Please ensure you are at the work location before clocking in. Your GPS coordinates are recorded for verification.",allRightsReserved:"All rights reserved."},profile:{title:"Edit Profile",name:"Name",newPassword:"New Password",confirmPassword:"Confirm New Password",save:"Save Changes",saving:"Saving...",success:"Profile updated successfully",passwordMismatch:"Passwords do not match",updateError:"Failed to update profile",defaultPasswordWarning:"Please change your default password to continue.",leaveBlank:"Leave blank to keep current password"}},"zh-tw":{common:{appName:"人事管理系統",signOut:"登出",loading:"載入中...",error:"錯誤",success:"成功",notice:"注意事項",systemInfo:"系統資訊"},login:{welcomeBack:"歡迎回來",signInToAccount:"請登入您的人事系統帳號",username:"使用者名稱",password:"密碼",signIn:"登入",signingIn:"登入中...",invalidCredentials:"帳號或密碼錯誤",connectionError:"連線伺服器失敗。請檢查您的網路連線與 GAS 網址。",needHelp:"需要幫助？",contactSupport:"聯繫支援",managementSystem:"管理系統",enterUsername:"請輸入使用者名稱",enterPassword:"請輸入密碼"},dashboard:{welcome:"歡迎，{name}",role:"角色：{role}",attendanceAction:"出勤操作",capturedWithGps:"將記錄 GPS 座標",clockIn:"上班打卡",clockOut:"下班打卡",capturingLocation:"正在取得位置...",recordingClockIn:"正在記錄上班時間...",recordingClockOut:"正在記錄下班時間...",clockedInSuccess:"上班打卡成功！",clockedOutSuccess:"下班打卡成功！",failedToRecord:"記錄出勤失敗",serverError:"伺服器連線錯誤。請檢查 GAS 網址。",locationError:"位置錯誤：{error}。請開啟 GPS。",geoNotSupported:"您的瀏覽器不支援地理位置功能",deviceDetected:"偵測裝置",gpsStatus:"GPS 狀態",active:"已啟用",awaitingPermission:"等待權限",noticeContent:"打卡前請確保您已到達工作地點。系統將會記錄您的 GPS 座標以便查核。",allRightsReserved:"版權所有。"},profile:{title:"編輯個人資料",name:"姓名",newPassword:"新密碼",confirmPassword:"確認新密碼",save:"儲存變更",saving:"儲存中...",success:"個人資料更新成功",passwordMismatch:"密碼不相符",updateError:"更新個人資料失敗",defaultPasswordWarning:"請更改預設密碼以繼續使用。",leaveBlank:"若不修改密碼請留空"}}},o=(0,r.createContext)(void 0),l=e=>{let{children:t}=e,[s,l]=(0,r.useState)("en");return(0,r.useEffect)(()=>{let e=localStorage.getItem("language");e&&("en"===e||"zh-tw"===e)?l(e):navigator.language.toLowerCase().startsWith("zh")&&l("zh-tw")},[]),(0,a.jsx)(o.Provider,{value:{language:s,setLanguage:e=>{l(e),localStorage.setItem("language",e)},t:(e,t)=>{let a=e.split("."),r=n[s];for(let t of a){if(void 0===r[t])return e;r=r[t]}return"string"==typeof r&&t&&Object.entries(t).forEach(e=>{let[t,s]=e;r=r.replace("{".concat(t,"}"),s)}),r}},children:t})},i=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},347:()=>{}},e=>{var t=t=>e(e.s=t);e.O(0,[896,662,125,814,824,451,441,517,358],()=>t(3709)),_N_E=e.O()}]);