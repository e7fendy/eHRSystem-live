(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{3709:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,4147,23)),Promise.resolve().then(t.t.bind(t,8489,23)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,8534)),Promise.resolve().then(t.bind(t,9167)),Promise.resolve().then(t.bind(t,8435))},8534:(e,s,t)=>{"use strict";t.d(s,{Providers:()=>n});var a=t(5155),r=t(183),l=t(814);function n(e){let{children:s}=e;return(0,a.jsxs)(r.I,{children:[s,(0,a.jsx)(l.l$,{position:"top-center",richColors:!0})]})}},9167:(e,s,t)=>{"use strict";t.d(s,{ClientLayout:()=>V});var a=t(5155),r=t(8435),l=t(2115),n=t(8173),d=t.n(n),o=t(6046),i=t(183),c=t(6240),m=t(3312),x=t(1061),h=t(1567);let f=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.bL,{ref:s,className:(0,h.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...r})});f.displayName=x.bL.displayName;let p=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x._V,{ref:s,className:(0,h.cn)("aspect-square h-full w-full",t),...r})});p.displayName=x._V.displayName;let u=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(x.H4,{ref:s,className:(0,h.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...r})});u.displayName=x.H4.displayName;var g=t(434);let b=l.forwardRef((e,s)=>{let{className:t,orientation:r="horizontal",...l}=e;return(0,a.jsx)(g.b,{ref:s,decorative:!0,orientation:r,className:(0,h.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",t),...l})});b.displayName=g.b.displayName;var j=t(4276),N=t(1027),y=t(767);let v=j.bL,w=j.l9;j.bm;let k=j.ZL,C=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(j.hJ,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...r,ref:s})});C.displayName=j.hJ.displayName;let _=(0,N.F)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R=l.forwardRef((e,s)=>{let{side:t="right",className:r,children:l,...n}=e;return(0,a.jsxs)(k,{children:[(0,a.jsx)(C,{}),(0,a.jsxs)(j.UC,{ref:s,className:(0,h.cn)(_({side:t}),r),...n,children:[l,(0,a.jsxs)(j.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,a.jsx)(y.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});R.displayName=j.UC.displayName;let A=e=>{let{className:s,...t}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",s),...t})};A.displayName="SheetHeader";let P=l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(j.hE,{ref:s,className:(0,h.cn)("text-lg font-semibold text-foreground",t),...r})});P.displayName=j.hE.displayName,l.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(j.VY,{ref:s,className:(0,h.cn)("text-sm text-muted-foreground",t),...r})}).displayName=j.VY.displayName;var z=t(5236),L=t(3950),E=t(2823),F=t(6710);let U=()=>{let{user:e,logout:s}=(0,r.A)(),{t}=(0,i.o)(),n=(0,o.usePathname)(),[x,h]=(0,l.useState)(!1);if(!e)return null;let g="/"===n,j=n.startsWith("/admin"),N="/profile"===n,y=()=>(0,a.jsxs)("div",{className:"flex flex-col h-full",children:[(0,a.jsx)("div",{className:"mb-8 px-2 hidden md:block",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-primary rounded-xl flex items-center justify-center text-primary-foreground text-xl font-bold shadow-lg shadow-indigo-100",children:"e"}),(0,a.jsx)("span",{className:"text-xl font-bold text-foreground tracking-tight",children:t("common.appName")})]})}),(0,a.jsxs)("div",{className:"mb-8 space-y-4",children:[(0,a.jsxs)(d(),{href:"/profile",onClick:()=>h(!1),className:"px-2 flex items-center gap-3 p-2 rounded-xl transition-colors -mx-2 cursor-pointer group ".concat(N?"bg-secondary":"hover:bg-secondary/50"),children:[(0,a.jsxs)(f,{className:"shadow-md shrink-0 transition-shadow ".concat(N?"shadow-indigo-100":"group-hover:shadow-lg"),children:[(0,a.jsx)(p,{src:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e.name),"&background=5356FF&color=fff")}),(0,a.jsx)(u,{children:e.name.substring(0,2).toUpperCase()})]}),(0,a.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,a.jsx)("span",{className:"font-bold truncate text-base leading-tight transition-colors ".concat(N?"text-primary":"text-foreground group-hover:text-primary"),children:e.name}),e.role.toLowerCase()!==e.name.toLowerCase()&&(0,a.jsx)("span",{className:"text-muted-foreground font-medium text-xs truncate",children:e.role})]})]}),(0,a.jsx)("div",{className:"px-2",children:(0,a.jsxs)(m.$,{onClick:()=>{s(),h(!1)},variant:"ghost",className:"w-full font-bold h-10 rounded-xl bg-destructive/10 text-destructive hover:bg-destructive/20 justify-start px-3",children:[(0,a.jsx)(z.A,{className:"mr-2 h-4 w-4"}),t("common.signOut")]})}),(0,a.jsx)(b,{className:"bg-secondary mt-4"})]}),(0,a.jsxs)("nav",{className:"flex-1 space-y-2",children:[(0,a.jsxs)(d(),{href:"/",onClick:()=>h(!1),className:"flex items-center gap-3 px-4 py-3 rounded-2xl font-bold transition-all ".concat(g?"bg-secondary text-primary":"text-muted-foreground hover:bg-secondary hover:text-primary"),children:[(0,a.jsx)(L.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:t("dashboard.attendanceAction")})]}),"ADMIN"===e.role.toUpperCase()&&(0,a.jsxs)(d(),{href:"/admin/users",onClick:()=>h(!1),className:"flex items-center gap-3 px-4 py-3 rounded-2xl font-bold transition-all ".concat(j?"bg-secondary text-primary":"text-muted-foreground hover:bg-secondary hover:text-primary"),children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{children:t("admin.title")})]})]}),(0,a.jsxs)("div",{className:"mt-auto pt-6",children:[(0,a.jsx)("div",{className:"px-2",children:(0,a.jsx)(c.c,{})}),(0,a.jsxs)("div",{className:"md:hidden font-medium opacity-60 text-center text-xs text-muted-foreground mt-4",children:["\xa9 ",new Date().getFullYear()," ",t("common.appName"),". ",t("dashboard.allRightsReserved")]})]})]});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("aside",{className:"hidden md:flex flex-col w-64 h-screen bg-background border-r border-border p-6 fixed left-0 top-0 z-50 shadow-[4px_0_24px_rgba(0,0,0,0.02)]",children:(0,a.jsx)(y,{})}),(0,a.jsxs)("div",{className:"md:hidden bg-background border-b border-border sticky top-0 z-[60] h-[72px] flex items-center justify-between px-4",children:[(0,a.jsx)("div",{className:"flex justify-start w-12",children:(0,a.jsxs)(v,{open:x,onOpenChange:h,children:[(0,a.jsx)(w,{asChild:!0,children:(0,a.jsxs)(m.$,{variant:"ghost",size:"icon",className:"md:hidden",children:[(0,a.jsx)(F.A,{className:"h-6 w-6"}),(0,a.jsx)("span",{className:"sr-only",children:"Toggle menu"})]})}),(0,a.jsxs)(R,{side:"left",className:"w-3/4 max-w-xs p-6 pt-10",children:[(0,a.jsx)(A,{className:"mb-4 text-left",children:(0,a.jsx)(P,{children:t("common.appName")})}),(0,a.jsx)(y,{})]})]})}),(0,a.jsx)("div",{className:"flex justify-center flex-1",children:(0,a.jsx)("div",{className:"flex items-center gap-2",children:N?(0,a.jsx)("p",{className:"font-bold text-foreground text-lg tracking-tight",children:t("profile.title")}):g?(0,a.jsx)("p",{className:"font-bold text-foreground text-lg tracking-tight",children:t("dashboard.attendanceAction")}):j?(0,a.jsx)("p",{className:"font-bold text-foreground text-lg tracking-tight",children:t("admin.title")}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-primary rounded-lg flex items-center justify-center text-primary-foreground text-lg font-bold shadow-sm",children:"e"}),(0,a.jsx)("p",{className:"font-bold text-foreground text-lg tracking-tight",children:t("common.appName")})]})})}),(0,a.jsx)("div",{className:"w-12"})]})]})};function V(e){let{children:s}=e,{user:t,isLoading:l}=(0,r.A)(),n=(0,o.usePathname)();if(l)return(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-background",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"})});let d=t&&"/login"!==n;return(0,a.jsxs)("div",{className:"flex flex-col md:flex-row min-h-screen",children:[d&&(0,a.jsx)(U,{}),(0,a.jsx)("main",{className:"flex-1 transition-all duration-300 ".concat(d?"md:pl-64":""),children:s})]})}},6240:(e,s,t)=>{"use strict";t.d(s,{c:()=>d});var a=t(5155),r=t(183),l=t(3312),n=t(7485);let d=()=>{let{language:e,setLanguage:s}=(0,r.o)(),t=[{key:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{key:"zh-tw",label:"繁體中文",flag:"\uD83C\uDDF9\uD83C\uDDFC"}],d=t.find(s=>s.key===e)||t[0];return(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",className:"bg-slate-100/50 hover:bg-slate-100 text-slate-500 font-semibold transition-all h-12 md:h-8 px-6 md:px-4 rounded-full",children:[(0,a.jsx)("span",{className:"mr-2 text-xl md:text-sm",children:d.flag}),(0,a.jsx)("span",{className:"text-base md:text-xs",children:d.label})]})}),(0,a.jsx)(n.SQ,{align:"center",className:"min-w-[140px]",children:t.map(t=>(0,a.jsxs)(n._2,{onClick:()=>s(t.key),className:e===t.key?"text-primary font-semibold":"text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xl md:text-base mr-2",children:t.flag}),t.label]},t.key))})]})})}},347:()=>{}},e=>{var s=s=>e(e.s=s);e.O(0,[896,882,814,608,626,112,672,441,517,358],()=>s(3709)),_N_E=e.O()}]);