(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{535:(e,s,t)=>{Promise.resolve().then(t.bind(t,2579))},2579:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>I});var a=t(5155),r=t(2115),n=t(6046),o=t(8435),l=t(183),i=t(2649),[c,d]=(0,t(121).q)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"}),u=t(5369),m=t(4675),x=t(7010),g=t(3201),p=t(8553),h=t(7298),f=t(8117),b=t(9353),v=t(624),y=t(7568),w=t(8259),N=t(443),j=(0,f.Rf)((e,s)=>{let{children:t,context:n,Component:o,isPressable:l,disableAnimation:i,disableRipple:d,getCardProps:j,getRippleProps:S}=function(e){var s,t,a,n;let o=(0,h.o)(),[l,i]=(0,f.rE)(e,u.Nr.variantKeys),{ref:c,as:d,children:N,onClick:j,onPress:S,autoFocus:C,className:k,classNames:P,allowTextSelectionOnPress:I=!0,...A}=l,E=(0,y.zD)(c),O=d||(e.isPressable?"button":"div"),R="string"==typeof O,D=null!=(t=null!=(s=e.disableAnimation)?s:null==o?void 0:o.disableAnimation)&&t,G=null!=(n=null!=(a=e.disableRipple)?a:null==o?void 0:o.disableRipple)&&n,F=(0,m.cn)(null==P?void 0:P.base,k),{onClear:H,onPress:L,ripples:_}=(0,w.k)(),z=(0,r.useCallback)(e=>{G||D||!E.current||L(e)},[G,D,E,L]),{buttonProps:B,isPressed:U}=(0,p.l)({onPress:(0,b.cy)(S,z),elementType:d,isDisabled:!e.isPressable,onClick:j,allowTextSelectionOnPress:I,...A},E),{hoverProps:W,isHovered:T}=(0,g.M)({isDisabled:!e.isHoverable,...A}),{isFocusVisible:M,isFocused:J,focusProps:K}=(0,x.o)({autoFocus:C}),q=(0,r.useMemo)(()=>(0,u.Nr)({...i,disableAnimation:D}),[(0,b.t6)(i),D]),Q=(0,r.useMemo)(()=>({slots:q,classNames:P,disableAnimation:D,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[q,P,e.isDisabled,e.isFooterBlurred,D,e.fullWidth]),V=(0,r.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:E,className:q.base({class:F}),tabIndex:e.isPressable?0:-1,"data-hover":(0,b.sE)(T),"data-pressed":(0,b.sE)(U),"data-focus":(0,b.sE)(J),"data-focus-visible":(0,b.sE)(M),"data-disabled":(0,b.sE)(e.isDisabled),...(0,b.v6)(e.isPressable?{...B,...K,role:"button"}:{},e.isHoverable?W:{},(0,v.$)(A,{enabled:R}),(0,v.$)(s))}},[E,q,F,R,e.isPressable,e.isHoverable,e.isDisabled,T,U,M,B,K,W,A]),Y=(0,r.useCallback)(()=>({ripples:_,onClear:H}),[_,H]);return{context:Q,domRef:E,Component:O,classNames:P,children:N,isHovered:T,isPressed:U,disableAnimation:D,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:G,handlePress:z,isFocusVisible:M,getCardProps:V,getRippleProps:Y}}({...e,ref:s});return(0,a.jsxs)(o,{...j(),children:[(0,a.jsx)(c,{value:n,children:t}),l&&!i&&!d&&(0,a.jsx)(N.j,{...S()})]})});j.displayName="HeroUI.Card";var S=(0,f.Rf)((e,s)=>{var t;let{as:r,className:n,children:o,...l}=e,i=(0,y.zD)(s),{slots:c,classNames:u}=d(),x=(0,m.cn)(null==u?void 0:u.header,n);return(0,a.jsx)(r||"div",{ref:i,className:null==(t=c.header)?void 0:t.call(c,{class:x}),...l,children:o})});S.displayName="HeroUI.CardHeader";var C=(0,f.Rf)((e,s)=>{var t;let{as:r,className:n,children:o,...l}=e,i=(0,y.zD)(s),{slots:c,classNames:u}=d(),x=(0,m.cn)(null==u?void 0:u.body,n);return(0,a.jsx)(r||"div",{ref:i,className:null==(t=c.body)?void 0:t.call(c,{class:x}),...l,children:o})});C.displayName="HeroUI.CardBody";var k=(0,f.Rf)((e,s)=>{var t;let{as:r,className:n,children:o,...l}=e,i=(0,y.zD)(s),{slots:c,classNames:u}=d(),x=(0,m.cn)(null==u?void 0:u.footer,n);return(0,a.jsx)(r||"div",{ref:i,className:null==(t=c.footer)?void 0:t.call(c,{class:x}),...l,children:o})});k.displayName="HeroUI.CardFooter";var P=t(6240);function I(){let{t:e}=(0,l.o)(),[s,t]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,g]=(0,r.useState)(!1),{login:p,user:h,isLoading:f}=(0,o.A)(),b=(0,n.useRouter)();(0,r.useEffect)(()=>{!f&&h&&b.push("/")},[h,f,b]);let v=async t=>{t.preventDefault(),m(""),g(!0);try{let t=await i.K.login(s,c);t.success?(p(t.user),b.push("/")):m(t.message||e("login.invalidCredentials"))}catch(s){m(e("login.connectionError"))}finally{g(!1)}};return f||h?null:(0,a.jsx)("div",{className:"min-h-[100dvh] w-full flex items-center justify-center bg-[#f8fafe] font-sans",children:(0,a.jsxs)(j,{className:"w-full sm:max-w-[440px] min-h-[100dvh] sm:min-h-0 sm:h-auto shadow-none sm:shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border-none overflow-hidden rounded-none sm:rounded-[40px] bg-white flex flex-col",children:[(0,a.jsxs)(S,{className:"flex flex-col gap-2 items-center pt-16 sm:pt-14 pb-8 sm:pb-6 bg-white",children:[(0,a.jsx)("div",{className:"w-20 h-20 sm:w-20 sm:h-20 bg-[#5356FF] rounded-[24px] flex items-center justify-center shadow-lg shadow-indigo-100 mb-4 sm:mb-2",children:(0,a.jsx)("span",{className:"text-4xl sm:text-4xl font-bold text-white",children:"e"})}),(0,a.jsxs)("div",{className:"text-center space-y-3 sm:space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:e("login.welcomeBack")}),(0,a.jsx)("p",{className:"text-base sm:text-base text-slate-400 font-medium px-8 sm:px-4",children:e("login.signInToAccount")})]})]}),(0,a.jsxs)(C,{className:"px-10 sm:px-12 py-6 sm:py-6 bg-white flex-grow",children:[u&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-2xl text-xs mb-8 border border-red-100 flex items-center gap-2 animate-in fade-in zoom-in duration-300",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),u]}),(0,a.jsxs)("form",{onSubmit:v,className:"flex flex-col gap-8 sm:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-2",children:[(0,a.jsx)("label",{className:"text-sm sm:text-sm font-semibold text-slate-700 ml-1",htmlFor:"username",children:e("login.username")}),(0,a.jsx)("input",{id:"username",type:"text",required:!0,className:"w-full px-6 h-[56px] sm:h-[52px] bg-[#f8faff] border border-slate-100 rounded-[20px] text-lg sm:text-base text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-200",value:s,onChange:e=>t(e.target.value),placeholder:e("login.enterUsername")})]}),(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-2",children:[(0,a.jsx)("label",{className:"text-sm sm:text-sm font-semibold text-slate-700 ml-1",htmlFor:"password",children:e("login.password")}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,className:"w-full px-6 h-[56px] sm:h-[52px] bg-[#f8faff] border border-slate-100 rounded-[20px] text-lg sm:text-base text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-200",value:c,onChange:e=>d(e.target.value),placeholder:e("login.enterPassword")})]}),(0,a.jsx)("button",{type:"submit",disabled:x,className:"w-full h-[64px] sm:h-[56px] bg-[#5356FF] hover:bg-[#4346FF] text-white font-bold rounded-[24px] shadow-xl shadow-blue-200/50 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-3 mt-4 sm:mt-2 text-xl sm:text-lg",children:x?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-6 h-6 sm:w-5 sm:h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:e("login.signingIn")})]}):e("login.signIn")})]}),(0,a.jsx)("div",{className:"mt-12 sm:mt-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-slate-400 font-medium",children:e("login.managementSystem")})})]}),(0,a.jsxs)(k,{className:"flex flex-col gap-6 sm:gap-5 pb-12 sm:pb-10 pt-8 sm:pt-6 px-10 sm:px-8 text-center bg-[#f8f9fb]/50 border-t border-slate-50",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-500 font-medium",children:[e("login.needHelp")," ",(0,a.jsx)("a",{href:"#",className:"font-bold text-slate-900 hover:underline ml-1",children:e("login.contactSupport")})]}),(0,a.jsxs)("div",{className:"space-y-5 sm:space-y-4",children:[(0,a.jsxs)("p",{className:"text-xs text-slate-400 font-medium",children:["Powered by ",e("common.appName")," v1.0"]}),(0,a.jsx)(P.c,{})]})]})]})})}},6240:(e,s,t)=>{"use strict";t.d(s,{c:()=>d});var a=t(5155),r=t(183),n=t(7216),o=t(3755),l=t(8233),i=t(8267),c=t(8619);let d=()=>{let{language:e,setLanguage:s}=(0,r.o)(),t=[{key:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{key:"zh-tw",label:"繁體中文",flag:"\uD83C\uDDF9\uD83C\uDDFC"}],d=t.find(s=>s.key===e)||t[0];return(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)(n.A,{placement:"top",showArrow:!0,classNames:{content:"bg-white border border-gray-100 shadow-xl min-w-[180px] md:min-w-[140px] p-2"},children:[(0,a.jsx)(o.b,{children:(0,a.jsxs)(l.T,{variant:"flat",size:"md",className:"bg-slate-100/50 hover:bg-slate-100 text-slate-500 font-semibold transition-all h-12 md:h-8 px-6 md:px-4 rounded-full",children:[(0,a.jsx)("span",{className:"mr-2 text-xl md:text-sm",children:d.flag}),(0,a.jsx)("span",{className:"text-base md:text-xs",children:d.label})]})}),(0,a.jsx)(i.y,{"aria-label":"Language Selection",onAction:e=>s(e),selectedKeys:[e],selectionMode:"single",itemClasses:{base:["rounded-lg","transition-opacity","py-3 md:py-2","px-3 md:px-2","data-[hover=true]:text-indigo-600","data-[hover=true]:bg-indigo-50","data-[selectable=true]:focus:bg-indigo-50","data-[pressed=true]:opacity-70"],title:"text-base md:text-sm"},children:t.map(s=>(0,a.jsx)(c.Y,{startContent:(0,a.jsx)("span",{className:"text-xl md:text-base mr-2 md:mr-0",children:s.flag}),className:e===s.key?"text-indigo-600 font-semibold":"text-gray-600",children:s.label},s.key))})]})})}},8435:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,AuthProvider:()=>o});var a=t(5155),r=t(2115);let n=(0,r.createContext)(void 0),o=e=>{let{children:s}=e,[t,o]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("ehr_user");if(e)try{o(JSON.parse(e))}catch(e){localStorage.removeItem("ehr_user")}i(!1)},[]),(0,a.jsx)(n.Provider,{value:{user:t,login:e=>{o(e),localStorage.setItem("ehr_user",JSON.stringify(e))},logout:()=>{o(null),localStorage.removeItem("ehr_user")},isLoading:l},children:s})},l=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},183:(e,s,t)=>{"use strict";t.d(s,{I:()=>l,o:()=>i});var a=t(5155),r=t(2115);let n={en:{common:{appName:"eHR System",signOut:"Sign Out",loading:"Loading...",error:"Error",success:"Success",notice:"Notice",systemInfo:"System Info"},login:{welcomeBack:"Welcome Back",signInToAccount:"Sign in to your eHR account",username:"Username",password:"Password",signIn:"Sign In",signingIn:"Signing in...",invalidCredentials:"Invalid credentials",connectionError:"Failed to connect to the server. Please check your connection and GAS URL.",needHelp:"Need help?",contactSupport:"Contact Support",managementSystem:"Management System",enterUsername:"Enter your username",enterPassword:"Enter your password"},dashboard:{welcome:"Welcome, {name}",role:"Role: {role}",attendanceAction:"Attendance Action",capturedWithGps:"Captured with GPS location",clockIn:"CLOCK IN",clockOut:"CLOCK OUT",capturingLocation:"Capturing location...",recordingClockIn:"Recording Clock In...",recordingClockOut:"Recording Clock Out...",clockedInSuccess:"Clocked in successfully!",clockedOutSuccess:"Clocked out successfully!",failedToRecord:"Failed to record attendance",serverError:"Server connection error. Check GAS URL.",locationError:"Location error: {error}. Please enable GPS.",geoNotSupported:"Geolocation is not supported by your browser",deviceDetected:"Device Detected",gpsStatus:"GPS Status",active:"Active",awaitingPermission:"Awaiting Permission",noticeContent:"Please ensure you are at the work location before clocking in. Your GPS coordinates are recorded for verification.",allRightsReserved:"All rights reserved."}},"zh-tw":{common:{appName:"人事管理系統",signOut:"登出",loading:"載入中...",error:"錯誤",success:"成功",notice:"注意事項",systemInfo:"系統資訊"},login:{welcomeBack:"歡迎回來",signInToAccount:"請登入您的人事系統帳號",username:"使用者名稱",password:"密碼",signIn:"登入",signingIn:"登入中...",invalidCredentials:"帳號或密碼錯誤",connectionError:"連線伺服器失敗。請檢查您的網路連線與 GAS 網址。",needHelp:"需要幫助？",contactSupport:"聯繫支援",managementSystem:"管理系統",enterUsername:"請輸入使用者名稱",enterPassword:"請輸入密碼"},dashboard:{welcome:"歡迎，{name}",role:"角色：{role}",attendanceAction:"出勤操作",capturedWithGps:"將記錄 GPS 座標",clockIn:"上班打卡",clockOut:"下班打卡",capturingLocation:"正在取得位置...",recordingClockIn:"正在記錄上班時間...",recordingClockOut:"正在記錄下班時間...",clockedInSuccess:"上班打卡成功！",clockedOutSuccess:"下班打卡成功！",failedToRecord:"記錄出勤失敗",serverError:"伺服器連線錯誤。請檢查 GAS 網址。",locationError:"位置錯誤：{error}。請開啟 GPS。",geoNotSupported:"您的瀏覽器不支援地理位置功能",deviceDetected:"偵測裝置",gpsStatus:"GPS 狀態",active:"已啟用",awaitingPermission:"等待權限",noticeContent:"打卡前請確保您已到達工作地點。系統將會記錄您的 GPS 座標以便查核。",allRightsReserved:"版權所有。"}}},o=(0,r.createContext)(void 0),l=e=>{let{children:s}=e,[t,l]=(0,r.useState)("en");return(0,r.useEffect)(()=>{let e=localStorage.getItem("language");e&&("en"===e||"zh-tw"===e)?l(e):navigator.language.toLowerCase().startsWith("zh")&&l("zh-tw")},[]),(0,a.jsx)(o.Provider,{value:{language:t,setLanguage:e=>{l(e),localStorage.setItem("language",e)},t:(e,s)=>{let a=e.split("."),r=n[t];for(let s of a){if(void 0===r[s])return e;r=r[s]}return"string"==typeof r&&s&&Object.entries(s).forEach(e=>{let[s,t]=e;r=r.replace("{".concat(s,"}"),t)}),r}},children:s})},i=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},2649:(e,s,t)=>{"use strict";t.d(s,{K:()=>r});let a="https://script.google.com/macros/s/AKfycbws0CrGA92VJAlgNwbg6nMQNWnJVVfbA1sOJuC_fQzWrrkaFeeBoDMB5EdkxYfxGkHQ/exec",r={login:async(e,s)=>(await fetch(a,{method:"POST",mode:"cors",body:JSON.stringify({action:"login",username:e,password:s})})).json(),recordAttendance:async e=>(await fetch(a,{method:"POST",mode:"cors",body:JSON.stringify({action:"attendance",...e})})).json()}}},e=>{var s=s=>e(e.s=s);e.O(0,[662,251,805,441,517,358],()=>s(535)),_N_E=e.O()}]);