(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{535:(e,s,t)=>{Promise.resolve().then(t.bind(t,7527))},4505:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(7401).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},7527:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>p});var a=t(5155),r=t(2115),l=t(6046),n=t(8435),d=t(183),o=t(7492),i=t(9749),c=t(3900),m=t(3312),f=t(8986),u=t(6240),x=t(4505);function p(){let{t:e}=(0,d.o)(),[s,t]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[b,N]=(0,r.useState)(!1),{login:j,user:w,isLoading:v}=(0,n.A)(),S=(0,l.useRouter)(),[k,O]=(0,r.useState)(null);(0,r.useEffect)(()=>{!v&&w&&S.push(k||"/")},[w,v,S,k]);let C=async t=>{t.preventDefault(),y(""),N(!0);try{let t=await o.K.login(s,p);t.success?("000000"===p&&O("/profile?reset=true"),j(t.user)):y(t.message||e("login.invalidCredentials"))}catch(s){y(e("login.connectionError"))}finally{N(!1)}};return v||w?null:(0,a.jsx)("div",{className:"min-h-[100dvh] w-full flex items-center justify-center bg-muted/30 font-sans",children:(0,a.jsxs)(i.Zp,{className:"w-full sm:max-w-[440px] border-none shadow-none sm:shadow-lg",children:[(0,a.jsxs)(i.aR,{className:"flex flex-col gap-2 items-center pt-10 pb-6",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-primary rounded-xl flex items-center justify-center shadow-lg shadow-indigo-100 mb-2",children:(0,a.jsx)("span",{className:"text-3xl font-bold text-primary-foreground",children:"e"})}),(0,a.jsxs)("div",{className:"text-center space-y-1",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:e("login.welcomeBack")}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e("login.signInToAccount")})]})]}),(0,a.jsxs)(i.Wu,{className:"px-8 pb-6",children:[h&&(0,a.jsx)("div",{className:"bg-destructive/10 text-destructive px-4 py-3 rounded-md text-sm mb-6 flex items-center gap-2",children:h}),(0,a.jsxs)("form",{onSubmit:C,className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"username",children:e("login.username")}),(0,a.jsx)(c.p,{id:"username",type:"text",required:!0,className:"h-11",value:s,onChange:e=>t(e.target.value),placeholder:e("login.enterUsername")})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(f.J,{htmlFor:"password",children:e("login.password")}),(0,a.jsx)(c.p,{id:"password",type:"password",required:!0,className:"h-11",value:p,onChange:e=>g(e.target.value),placeholder:e("login.enterPassword")})]}),(0,a.jsx)(m.$,{type:"submit",disabled:b,className:"w-full h-11 text-lg",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{className:"mr-2 h-4 w-4 animate-spin"}),e("login.signingIn")]}):e("login.signIn")})]}),(0,a.jsx)("div",{className:"mt-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:e("login.managementSystem")})})]}),(0,a.jsxs)(i.wL,{className:"flex flex-col gap-4 pb-8 pt-6 bg-muted/50 border-t text-center",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[e("login.needHelp")," ",(0,a.jsx)("a",{href:"#",className:"font-semibold text-foreground hover:underline ml-1",children:e("login.contactSupport")})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Powered by ",e("common.appName")," v1.0"]}),(0,a.jsx)(u.c,{})]})]})]})})}},6240:(e,s,t)=>{"use strict";t.d(s,{c:()=>d});var a=t(5155),r=t(183),l=t(3312),n=t(7485);let d=()=>{let{language:e,setLanguage:s}=(0,r.o)(),t=[{key:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{key:"zh-tw",label:"繁體中文",flag:"\uD83C\uDDF9\uD83C\uDDFC"}],d=t.find(s=>s.key===e)||t[0];return(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)(n.rI,{children:[(0,a.jsx)(n.ty,{asChild:!0,children:(0,a.jsxs)(l.$,{variant:"ghost",className:"bg-slate-100/50 hover:bg-slate-100 text-slate-500 font-semibold transition-all h-12 md:h-8 px-6 md:px-4 rounded-full",children:[(0,a.jsx)("span",{className:"mr-2 text-xl md:text-sm",children:d.flag}),(0,a.jsx)("span",{className:"text-base md:text-xs",children:d.label})]})}),(0,a.jsx)(n.SQ,{align:"center",className:"min-w-[140px]",children:t.map(t=>(0,a.jsxs)(n._2,{onClick:()=>s(t.key),className:e===t.key?"text-primary font-semibold":"text-muted-foreground",children:[(0,a.jsx)("span",{className:"text-xl md:text-base mr-2",children:t.flag}),t.label]},t.key))})]})})}},9749:(e,s,t)=>{"use strict";t.d(s,{BT:()=>i,Wu:()=>c,ZB:()=>o,Zp:()=>n,aR:()=>d,wL:()=>m});var a=t(5155),r=t(2115),l=t(1567);let n=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",t),...r})});n.displayName="Card";let d=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",t),...r})});d.displayName="CardHeader";let o=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("h3",{ref:s,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",t),...r})});o.displayName="CardTitle";let i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("p",{ref:s,className:(0,l.cn)("text-sm text-muted-foreground",t),...r})});i.displayName="CardDescription";let c=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("p-6 pt-0",t),...r})});c.displayName="CardContent";let m=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)("div",{ref:s,className:(0,l.cn)("flex items-center p-6 pt-0",t),...r})});m.displayName="CardFooter"},3900:(e,s,t)=>{"use strict";t.d(s,{p:()=>n});var a=t(5155),r=t(2115),l=t(1567);let n=r.forwardRef((e,s)=>{let{className:t,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});n.displayName="Input"},8986:(e,s,t)=>{"use strict";t.d(s,{J:()=>i});var a=t(5155),r=t(2115),l=t(6195),n=t(1027),d=t(1567);let o=(0,n.F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),i=r.forwardRef((e,s)=>{let{className:t,...r}=e;return(0,a.jsx)(l.b,{ref:s,className:(0,d.cn)(o(),t),...r})});i.displayName=l.b.displayName},7492:(e,s,t)=>{"use strict";async function a(e){let s=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",s))).map(e=>e.toString(16).padStart(2,"0")).join("")}t.d(s,{K:()=>l});let r="https://script.google.com/macros/s/AKfycbykkMfiBgWSCNU1CyMHq_Ist9TdDja9-sPIanCJ893o4gXloFwGxFgbD3FNKUf0AN6v/exec",l={async login(e,s){let t=await a(s);return(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"login",username:e,password:t})})).json()},async updateProfile(e,s,t){let l={action:"updateUser",userId:e,name:s};return t&&(l.password=await a(t)),(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify(l)})).json()},async getUsers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"getUsers",page:e,pageSize:s})})).json()},addUser:async(e,s,t)=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"addUser",username:e,name:s,role:t})})).json(),updateUserAdmin:async(e,s,t)=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"updateUser",userId:e,name:s,role:t})})).json(),deleteUser:async e=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"deleteUser",userId:e})})).json(),resetPassword:async e=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"resetPassword",userId:e})})).json(),recordAttendance:async e=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"attendance",...e})})).json()}},6195:(e,s,t)=>{"use strict";t.d(s,{b:()=>d});var a=t(2115),r=t(3360),l=t(5155),n=a.forwardRef((e,s)=>(0,l.jsx)(r.sG.label,{...e,ref:s,onMouseDown:s=>{var t;s.target.closest("button, input, select, textarea")||(null===(t=e.onMouseDown)||void 0===t||t.call(e,s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));n.displayName="Label";var d=n}},e=>{var s=s=>e(e.s=s);e.O(0,[882,608,672,441,517,358],()=>s(535)),_N_E=e.O()}]);