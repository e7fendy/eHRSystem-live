(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[520],{535:(e,s,t)=>{Promise.resolve().then(t.bind(t,1131))},1131:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>b});var a=t(5155),r=t(2115),o=t(6046),n=t(8435),l=t(183),i=t(7492),c=t(9778),d=t(7302),u=t(5044),m=t(9644),x=t(8117),g=t(7568),p=t(4675),h=(0,x.Rf)((e,s)=>{var t;let{as:r,className:o,children:n,...l}=e,i=(0,g.zD)(s),{slots:c,classNames:d}=(0,m.f)(),u=(0,p.cn)(null==d?void 0:d.footer,o);return(0,a.jsx)(r||"div",{ref:i,className:null==(t=c.footer)?void 0:t.call(c,{class:u}),...l,children:n})});h.displayName="HeroUI.CardFooter";var f=t(6240);function b(){let{t:e}=(0,l.o)(),[s,t]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[g,p]=(0,r.useState)(""),[b,v]=(0,r.useState)(!1),{login:w,user:y,isLoading:S}=(0,n.A)(),j=(0,o.useRouter)(),[N,P]=(0,r.useState)(null);(0,r.useEffect)(()=>{!S&&y&&j.push(N||"/")},[y,S,j,N]);let C=async t=>{t.preventDefault(),p(""),v(!0);try{let t=await i.K.login(s,m);t.success?("000000"===m&&P("/profile?reset=true"),w(t.user)):p(t.message||e("login.invalidCredentials"))}catch(s){p(e("login.connectionError"))}finally{v(!1)}};return S||y?null:(0,a.jsx)("div",{className:"min-h-[100dvh] w-full flex items-center justify-center bg-[#f8fafe] font-sans",children:(0,a.jsxs)(c.Z,{className:"w-full sm:max-w-[440px] min-h-[100dvh] sm:min-h-0 sm:h-auto shadow-none sm:shadow-[0_20px_60px_-15px_rgba(0,0,0,0.1)] border-none overflow-hidden rounded-none sm:rounded-[40px] bg-white flex flex-col",children:[(0,a.jsxs)(d.d,{className:"flex flex-col gap-2 items-center pt-16 sm:pt-14 pb-8 sm:pb-6 bg-white",children:[(0,a.jsx)("div",{className:"w-20 h-20 sm:w-20 sm:h-20 bg-[#5356FF] rounded-[24px] flex items-center justify-center shadow-lg shadow-indigo-100 mb-4 sm:mb-2",children:(0,a.jsx)("span",{className:"text-4xl sm:text-4xl font-bold text-white",children:"e"})}),(0,a.jsxs)("div",{className:"text-center space-y-3 sm:space-y-2",children:[(0,a.jsx)("h1",{className:"text-3xl sm:text-3xl font-bold text-slate-900 tracking-tight",children:e("login.welcomeBack")}),(0,a.jsx)("p",{className:"text-base sm:text-base text-slate-400 font-medium px-8 sm:px-4",children:e("login.signInToAccount")})]})]}),(0,a.jsxs)(u.U,{className:"px-10 sm:px-12 py-6 sm:py-6 bg-white flex-grow",children:[g&&(0,a.jsxs)("div",{className:"bg-red-50 text-red-600 px-4 py-3 rounded-2xl text-xs mb-8 border border-red-100 flex items-center gap-2 animate-in fade-in zoom-in duration-300",children:[(0,a.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,a.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,a.jsx)("line",{x1:"12",y1:"8",x2:"12",y2:"12"}),(0,a.jsx)("line",{x1:"12",y1:"16",x2:"12.01",y2:"16"})]}),g]}),(0,a.jsxs)("form",{onSubmit:C,className:"flex flex-col gap-8 sm:gap-6",children:[(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-2",children:[(0,a.jsx)("label",{className:"text-sm sm:text-sm font-semibold text-slate-700 ml-1",htmlFor:"username",children:e("login.username")}),(0,a.jsx)("input",{id:"username",type:"text",required:!0,className:"w-full px-6 h-[56px] sm:h-[52px] bg-[#f8faff] border border-slate-100 rounded-[20px] text-lg sm:text-base text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-200",value:s,onChange:e=>t(e.target.value),placeholder:e("login.enterUsername")})]}),(0,a.jsxs)("div",{className:"space-y-3 sm:space-y-2",children:[(0,a.jsx)("label",{className:"text-sm sm:text-sm font-semibold text-slate-700 ml-1",htmlFor:"password",children:e("login.password")}),(0,a.jsx)("input",{id:"password",type:"password",required:!0,className:"w-full px-6 h-[56px] sm:h-[52px] bg-[#f8faff] border border-slate-100 rounded-[20px] text-lg sm:text-base text-slate-900 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-indigo-500/20 focus:border-indigo-500 transition-all duration-200",value:m,onChange:e=>x(e.target.value),placeholder:e("login.enterPassword")})]}),(0,a.jsx)("button",{type:"submit",disabled:b,className:"w-full h-[64px] sm:h-[56px] bg-[#5356FF] hover:bg-[#4346FF] text-white font-bold rounded-[24px] shadow-xl shadow-blue-200/50 transition-all active:scale-[0.98] disabled:opacity-70 disabled:cursor-not-allowed flex items-center justify-center gap-3 mt-4 sm:mt-2 text-xl sm:text-lg",children:b?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"w-6 h-6 sm:w-5 sm:h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),(0,a.jsx)("span",{children:e("login.signingIn")})]}):e("login.signIn")})]}),(0,a.jsx)("div",{className:"mt-12 sm:mt-8 text-center",children:(0,a.jsx)("p",{className:"text-sm text-slate-400 font-medium",children:e("login.managementSystem")})})]}),(0,a.jsxs)(h,{className:"flex flex-col gap-6 sm:gap-5 pb-12 sm:pb-10 pt-8 sm:pt-6 px-10 sm:px-8 text-center bg-[#f8f9fb]/50 border-t border-slate-50",children:[(0,a.jsxs)("p",{className:"text-sm text-slate-500 font-medium",children:[e("login.needHelp")," ",(0,a.jsx)("a",{href:"#",className:"font-bold text-slate-900 hover:underline ml-1",children:e("login.contactSupport")})]}),(0,a.jsxs)("div",{className:"space-y-5 sm:space-y-4",children:[(0,a.jsxs)("p",{className:"text-xs text-slate-400 font-medium",children:["Powered by ",e("common.appName")," v1.0"]}),(0,a.jsx)(f.c,{})]})]})]})})}},6240:(e,s,t)=>{"use strict";t.d(s,{c:()=>d});var a=t(5155),r=t(183),o=t(1028),n=t(3898),l=t(8233),i=t(5964),c=t(8619);let d=()=>{let{language:e,setLanguage:s}=(0,r.o)(),t=[{key:"en",label:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},{key:"zh-tw",label:"繁體中文",flag:"\uD83C\uDDF9\uD83C\uDDFC"}],d=t.find(s=>s.key===e)||t[0];return(0,a.jsx)("div",{className:"flex justify-center mt-2",children:(0,a.jsxs)(o.A,{placement:"top",showArrow:!0,classNames:{content:"bg-white border border-gray-100 shadow-xl min-w-[180px] md:min-w-[140px] p-2"},children:[(0,a.jsx)(n.b,{children:(0,a.jsxs)(l.T,{variant:"flat",size:"md",className:"bg-slate-100/50 hover:bg-slate-100 text-slate-500 font-semibold transition-all h-12 md:h-8 px-6 md:px-4 rounded-full",children:[(0,a.jsx)("span",{className:"mr-2 text-xl md:text-sm",children:d.flag}),(0,a.jsx)("span",{className:"text-base md:text-xs",children:d.label})]})}),(0,a.jsx)(i.y,{"aria-label":"Language Selection",onAction:e=>s(e),selectedKeys:[e],selectionMode:"single",itemClasses:{base:["rounded-lg","transition-opacity","py-3 md:py-2","px-3 md:px-2","data-[hover=true]:text-indigo-600","data-[hover=true]:bg-indigo-50","data-[selectable=true]:focus:bg-indigo-50","data-[pressed=true]:opacity-70"],title:"text-base md:text-sm"},children:t.map(s=>(0,a.jsx)(c.Y,{startContent:(0,a.jsx)("span",{className:"text-xl md:text-base mr-2 md:mr-0",children:s.flag}),className:e===s.key?"text-indigo-600 font-semibold":"text-gray-600",children:s.label},s.key))})]})})}},8435:(e,s,t)=>{"use strict";t.d(s,{A:()=>l,AuthProvider:()=>n});var a=t(5155),r=t(2115);let o=(0,r.createContext)(void 0),n=e=>{let{children:s}=e,[t,n]=(0,r.useState)(null),[l,i]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{let e=localStorage.getItem("ehr_user");if(e)try{n(JSON.parse(e))}catch(e){localStorage.removeItem("ehr_user")}i(!1)},[]),(0,a.jsx)(o.Provider,{value:{user:t,login:e=>{n(e),localStorage.setItem("ehr_user",JSON.stringify(e))},logout:()=>{n(null),localStorage.removeItem("ehr_user")},isLoading:l},children:s})},l=()=>{let e=(0,r.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},183:(e,s,t)=>{"use strict";t.d(s,{I:()=>l,o:()=>i});var a=t(5155),r=t(2115);let o={en:{common:{appName:"eHR System",signOut:"Sign Out",loading:"Loading...",error:"Error",success:"Success",notice:"Notice",systemInfo:"System Info"},login:{welcomeBack:"Welcome Back",signInToAccount:"Sign in to your eHR account",username:"Username",password:"Password",signIn:"Sign In",signingIn:"Signing in...",invalidCredentials:"Invalid credentials",connectionError:"Failed to connect to the server. Please check your connection and GAS URL.",needHelp:"Need help?",contactSupport:"Contact Support",managementSystem:"Management System",enterUsername:"Enter your username",enterPassword:"Enter your password"},dashboard:{welcome:"Welcome, {name}",role:"Role: {role}",attendanceAction:"Attendance Action",capturedWithGps:"Captured with GPS location",clockIn:"CLOCK IN",clockOut:"CLOCK OUT",capturingLocation:"Capturing location...",recordingClockIn:"Recording Clock In...",recordingClockOut:"Recording Clock Out...",clockedInSuccess:"Clocked in successfully!",clockedOutSuccess:"Clocked out successfully!",failedToRecord:"Failed to record attendance",serverError:"Server connection error. Check GAS URL.",locationError:"Location error: {error}. Please enable GPS.",geoNotSupported:"Geolocation is not supported by your browser",deviceDetected:"Device Detected",gpsStatus:"GPS Status",active:"Active",awaitingPermission:"Awaiting Permission",noticeContent:"Please ensure you are at the work location before clocking in. Your GPS coordinates are recorded for verification.",allRightsReserved:"All rights reserved."},profile:{title:"Edit Profile",name:"Name",newPassword:"New Password",confirmPassword:"Confirm New Password",save:"Save Changes",saving:"Saving...",success:"Profile updated successfully",passwordMismatch:"Passwords do not match",updateError:"Failed to update profile",defaultPasswordWarning:"Please change your default password to continue.",leaveBlank:"Leave blank to keep current password"}},"zh-tw":{common:{appName:"人事管理系統",signOut:"登出",loading:"載入中...",error:"錯誤",success:"成功",notice:"注意事項",systemInfo:"系統資訊"},login:{welcomeBack:"歡迎回來",signInToAccount:"請登入您的人事系統帳號",username:"使用者名稱",password:"密碼",signIn:"登入",signingIn:"登入中...",invalidCredentials:"帳號或密碼錯誤",connectionError:"連線伺服器失敗。請檢查您的網路連線與 GAS 網址。",needHelp:"需要幫助？",contactSupport:"聯繫支援",managementSystem:"管理系統",enterUsername:"請輸入使用者名稱",enterPassword:"請輸入密碼"},dashboard:{welcome:"歡迎，{name}",role:"角色：{role}",attendanceAction:"出勤操作",capturedWithGps:"將記錄 GPS 座標",clockIn:"上班打卡",clockOut:"下班打卡",capturingLocation:"正在取得位置...",recordingClockIn:"正在記錄上班時間...",recordingClockOut:"正在記錄下班時間...",clockedInSuccess:"上班打卡成功！",clockedOutSuccess:"下班打卡成功！",failedToRecord:"記錄出勤失敗",serverError:"伺服器連線錯誤。請檢查 GAS 網址。",locationError:"位置錯誤：{error}。請開啟 GPS。",geoNotSupported:"您的瀏覽器不支援地理位置功能",deviceDetected:"偵測裝置",gpsStatus:"GPS 狀態",active:"已啟用",awaitingPermission:"等待權限",noticeContent:"打卡前請確保您已到達工作地點。系統將會記錄您的 GPS 座標以便查核。",allRightsReserved:"版權所有。"},profile:{title:"編輯個人資料",name:"姓名",newPassword:"新密碼",confirmPassword:"確認新密碼",save:"儲存變更",saving:"儲存中...",success:"個人資料更新成功",passwordMismatch:"密碼不相符",updateError:"更新個人資料失敗",defaultPasswordWarning:"請更改預設密碼以繼續使用。",leaveBlank:"若不修改密碼請留空"}}},n=(0,r.createContext)(void 0),l=e=>{let{children:s}=e,[t,l]=(0,r.useState)("en");return(0,r.useEffect)(()=>{let e=localStorage.getItem("language");e&&("en"===e||"zh-tw"===e)?l(e):navigator.language.toLowerCase().startsWith("zh")&&l("zh-tw")},[]),(0,a.jsx)(n.Provider,{value:{language:t,setLanguage:e=>{l(e),localStorage.setItem("language",e)},t:(e,s)=>{let a=e.split("."),r=o[t];for(let s of a){if(void 0===r[s])return e;r=r[s]}return"string"==typeof r&&s&&Object.entries(s).forEach(e=>{let[s,t]=e;r=r.replace("{".concat(s,"}"),t)}),r}},children:s})},i=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useLanguage must be used within a LanguageProvider");return e}},7492:(e,s,t)=>{"use strict";async function a(e){let s=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",s))).map(e=>e.toString(16).padStart(2,"0")).join("")}t.d(s,{K:()=>o});let r="https://script.google.com/macros/s/AKfycbzmxEOsly16LJr9Cc_lxRq9owKjDq2j1Z7BjhzxIP3BggbNEhoZmjqJldx4MJn65_ZU/exec",o={async login(e,s){let t=await a(s);return(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"login",username:e,password:t})})).json()},async updateProfile(e,s,t){let o={action:"updateUser",username:e,name:s};return t&&(o.password=await a(t)),(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify(o)})).json()},recordAttendance:async e=>(await fetch(r,{method:"POST",mode:"cors",body:JSON.stringify({action:"attendance",...e})})).json()}},7302:(e,s,t)=>{"use strict";t.d(s,{d:()=>c});var a=t(9644),r=t(8117),o=t(7568),n=t(4675),l=t(5155),i=(0,r.Rf)((e,s)=>{var t;let{as:r,className:i,children:c,...d}=e,u=(0,o.zD)(s),{slots:m,classNames:x}=(0,a.f)(),g=(0,n.cn)(null==x?void 0:x.header,i);return(0,l.jsx)(r||"div",{ref:u,className:null==(t=m.header)?void 0:t.call(m,{class:g}),...d,children:c})});i.displayName="HeroUI.CardHeader";var c=i},9778:(e,s,t)=>{"use strict";t.d(s,{Z:()=>v});var a=t(9644),r=t(5369),o=t(4675),n=t(2115),l=t(7010),i=t(3201),c=t(8553),d=t(7298),u=t(8117),m=t(9353),x=t(624),g=t(7568),p=t(8259),h=t(443),f=t(5155),b=(0,u.Rf)((e,s)=>{let{children:t,context:b,Component:v,isPressable:w,disableAnimation:y,disableRipple:S,getCardProps:j,getRippleProps:N}=function(e){var s,t,a,h;let f=(0,d.o)(),[b,v]=(0,u.rE)(e,r.Nr.variantKeys),{ref:w,as:y,children:S,onClick:j,onPress:N,autoFocus:P,className:C,classNames:k,allowTextSelectionOnPress:I=!0,...E}=b,A=(0,g.zD)(w),O=y||(e.isPressable?"button":"div"),R="string"==typeof O,D=null!=(t=null!=(s=e.disableAnimation)?s:null==f?void 0:f.disableAnimation)&&t,L=null!=(h=null!=(a=e.disableRipple)?a:null==f?void 0:f.disableRipple)&&h,F=(0,o.cn)(null==k?void 0:k.base,C),{onClear:H,onPress:U,ripples:_}=(0,p.k)(),G=(0,n.useCallback)(e=>{L||D||!A.current||U(e)},[L,D,A,U]),{buttonProps:z,isPressed:B}=(0,c.l)({onPress:(0,m.cy)(N,G),elementType:y,isDisabled:!e.isPressable,onClick:j,allowTextSelectionOnPress:I,...E},A),{hoverProps:T,isHovered:W}=(0,i.M)({isDisabled:!e.isHoverable,...E}),{isFocusVisible:M,isFocused:J,focusProps:K}=(0,l.o)({autoFocus:P}),q=(0,n.useMemo)(()=>(0,r.Nr)({...v,disableAnimation:D}),[(0,m.t6)(v),D]),Z=(0,n.useMemo)(()=>({slots:q,classNames:k,disableAnimation:D,isDisabled:e.isDisabled,isFooterBlurred:e.isFooterBlurred,fullWidth:e.fullWidth}),[q,k,e.isDisabled,e.isFooterBlurred,D,e.fullWidth]),Y=(0,n.useCallback)(function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{ref:A,className:q.base({class:F}),tabIndex:e.isPressable?0:-1,"data-hover":(0,m.sE)(W),"data-pressed":(0,m.sE)(B),"data-focus":(0,m.sE)(J),"data-focus-visible":(0,m.sE)(M),"data-disabled":(0,m.sE)(e.isDisabled),...(0,m.v6)(e.isPressable?{...z,...K,role:"button"}:{},e.isHoverable?T:{},(0,x.$)(E,{enabled:R}),(0,x.$)(s))}},[A,q,F,R,e.isPressable,e.isHoverable,e.isDisabled,W,B,M,z,K,T,E]),$=(0,n.useCallback)(()=>({ripples:_,onClear:H}),[_,H]);return{context:Z,domRef:A,Component:O,classNames:k,children:S,isHovered:W,isPressed:B,disableAnimation:D,isPressable:e.isPressable,isHoverable:e.isHoverable,disableRipple:L,handlePress:G,isFocusVisible:M,getCardProps:Y,getRippleProps:$}}({...e,ref:s});return(0,f.jsxs)(v,{...j(),children:[(0,f.jsx)(a.u,{value:b,children:t}),w&&!y&&!S&&(0,f.jsx)(h.j,{...N()})]})});b.displayName="HeroUI.Card";var v=b},5044:(e,s,t)=>{"use strict";t.d(s,{U:()=>c});var a=t(9644),r=t(8117),o=t(7568),n=t(4675),l=t(5155),i=(0,r.Rf)((e,s)=>{var t;let{as:r,className:i,children:c,...d}=e,u=(0,o.zD)(s),{slots:m,classNames:x}=(0,a.f)(),g=(0,n.cn)(null==x?void 0:x.body,i);return(0,l.jsx)(r||"div",{ref:u,className:null==(t=m.body)?void 0:t.call(m,{class:g}),...d,children:c})});i.displayName="HeroUI.CardBody";var c=i},9644:(e,s,t)=>{"use strict";t.d(s,{f:()=>r,u:()=>a});var[a,r]=(0,t(121).q)({name:"CardContext",strict:!0,errorMessage:"useCardContext: `context` is undefined. Seems you forgot to wrap component within <Card />"})}},e=>{var s=s=>e(e.s=s);e.O(0,[662,125,824,441,517,358],()=>s(535)),_N_E=e.O()}]);